red = #C3063C
selectionColor = red

@import 'tomorrow.styl'

////

textShadowToCropUnderline(color)
  text-shadow .03em 0 color, -.03em 0 color, 0 .03em color, 0 -.03em color, .06em 0 color, -.06em 0 color, .09em 0 color, -.09em 0 color, .12em 0 color, -.12em 0 color, .15em 0 color, -.15em 0 color

linkUnderlines(backgroundColor, color)
  color color
  text-decoration none
  textShadowToCropUnderline backgroundColor
  background-image linear-gradient(backgroundColor, backgroundColor), linear-gradient(backgroundColor, backgroundColor), linear-gradient(color, color)
  background-size .05em 1px, .05em 1px, 1px 1px
  background-repeat no-repeat, no-repeat, repeat-x
  background-position 0% 90%, 100% 90%, 0% 90%

  &::selection
    text-shadow none
    background-image none

  &::-moz-selection
    text-shadow none
    background-image none

  &:before, &:after, *, *:before, *:after
    text-shadow none

////

body {
  font-family 'Harmattan', 'Helvetica Neue', 'Roboto', 'Fira Sans', sans-serif
  font-size 140%
  line-height 1.58
  color rgba(black, 0.8)

  margin 0
  padding 0
}

.c, .container {
  max-width 700px
  width 95%

  margin-left auto
  margin-right auto
}

main {
  pre code {
    @extend .c

    display block
    padding-top .5em
    padding-bottom .5em

    white-space pre-wrap
  }

  img {
    max-width 100%
    margin 0 auto

    display block

    cursor -webkit-zoom-in
    cursor -moz-zoom-in

    padding-top 16px

    & + span {
      padding-bottom 16px
    }
  }

  p.viewing { // an img
    //transition 200ms
    max-width initial
    z-index 99

    img {
      cursor -webkit-zoom-out
      cursor -moz-zoom-out

      max-height 80vh
      margin 0 auto
      display block
    }

    span {
      color white
    }
  }
}

.center {
  text-align center
  display block
}

nav {
  // woo breadcrumbs
  @extend .c
  margin-top 1em

  user-select none
  -webkit-user-select none

  cursor default

  a, a:visited {
    color rgba(black, 0.9)
    background-image none

    cursor pointer

    &:hover {
      linkUnderlines white rgba(black, 0.9)
    }
  }

  a:first-child {
    color red

    &:hover {
      linkUnderlines white red
    }
  }
}

h1, h2, h3 {
  font-weight 400
  line-height 0.9
  @extend .c
}

h1 {
  font-size 350%
  letter-spacing -0.5px

  margin-top .4em
  margin-bottom 8px

  color rgba(black, 0.9)
}

h2 {
  color rgba(black, 0.6)

  margin-top -7px
  margin-bottom 1.2em
}

h3 {
  font-size 150%
  margin-top 1.5em
  margin-bottom 7px
}

p {
  @extend .c
  margin 16px auto

  font-family 'Crimson Text', serif

  b {
    font-weight 600
  }
}

blockquote {
  @extend p

  p {
    padding-left 1em
    border-left .2em solid #eee

    width 100%
    font-style italic
  }
}

::selection {
  color white
  background red
  text-shadow 0 !important
}

a {
  linkUnderlines white red

  &.dim {
    linkUnderlines white #6B6B6B
  }

  &.twitter {
    linkUnderlines white #54ABEE
  }

  &.github {
    linkUnderlines white #333333
  }

  &.scratch {
    linkUnderlines white #FF9400
  }
}

.dim {
  color #6B6B6B
}

footer {
  margin 4em 0
  margin-top 2em

  padding 24px 0

  p {
    //font-family 'Harmattan', 'Helvetica Neue', 'Roboto', 'Fira Sans', sans-serif
    font-size 110%

    position relative
    padding-left 150px

    width 550px
    line-height (96px / 2)

    img {
      position absolute
      left ((150px - 96px) / 2)

      width 96px
      height 96px
      border-radius 96px
      border 2px solid white
      background white
    }
  }

  &.landing {
    margin 0
    margin-top 1em

    width 100%
    height 100%
    background red

    p {
      color white

      .dim {
        color white
      }
    }

    a {
      linkUnderlines red white
    }
  }
}

.overlay {
  position fixed
  top 0
  left 0
  right 0
  bottom 0

  background black
  opacity 0
  transition opacity 70ms ease-out

  pointer-events none

  &.visible {
    opacity 0.8
    pointer-events all
  }
}

h1 a, h2 a {
  text-shadow none
  background-image none
  color inherit
}

.posts {
  padding-top 1em

  .post {
    display block
    padding-top 5.25em
    padding-bottom .25em

    margin-bottom 4em

    background-size cover
    background-repeat no-repeat
    background-position center center

    h1 {
      color rgba(white, 0.9)
    }

    h2 {
      color rgba(white, 0.6)
    }
  }
}

del, strike {
  text-decoration none
  display inline-block
  position relative

  color #B1B1B1

  &::before {
    content ''
    border-bottom 2px solid #B1B1B1
    width 100%

    position absolute
    right 0
    top 50%
  }
}

hr {
  width 90%
  max-width 300px

  border 0
  border-top 1px solid #eee

  margin 2em auto
}

ul {
  @extend p
}

#disqus_thread {
  margin-top -2em
  margin-bottom 3em
}
